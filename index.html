<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Generator Link Instan</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f9; display: flex; justify-content: center; padding: 50px; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 400px; }
        input { width: 100%; padding: 12px; margin: 15px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #2563eb; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        #resultBox { margin-top: 20px; display: none; padding: 15px; background: #f0f7ff; border: 1px dashed #2563eb; border-radius: 8px; word-break: break-all; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Link Generator</h2>
        <p style="color: #666; font-size: 0.9em;">Tempel URL tujuan akhir Anda di bawah ini.</p>
        <input type="text" id="targetUrl" placeholder="https://link-tujuan-anda.com">
        <button onclick="generateLink()">Generate & Copy Link</button>
        <div id="resultBox">
            <strong>Link Anda:</strong><br>
            <span id="finalLink" style="font-family: monospace; color: #2563eb;"></span>
        </div>
    </div>

    <script>
        async function generateLink() {
            const url = document.getElementById('targetUrl').value;
            if(!url) return alert("Masukkan URL tujuan!");
            
            const btn = document.querySelector('button');
            btn.innerText = "Mengambil Domain...";

            try {
                // Mengambil domain acak dari script share.js
                const res = await fetch('/share?get_random=true');
                const data = await res.json();
                
                const final = `https://${data.domain}/share?url=${encodeURIComponent(url)}`;
                
                document.getElementById('finalLink').innerText = final;
                document.getElementById('resultBox').style.display = 'block';
                
                // Copy otomatis
                navigator.clipboard.writeText(final);
                btn.innerText = "Berhasil Disalin!";
                setTimeout(() => btn.innerText = "Generate & Copy Link", 2000);
            } catch(e) {
                alert("Gagal mengambil domain acak. Pastikan domains.txt di GitHub benar.");
                btn.innerText = "Generate & Copy Link";
            }
        }
    </script>
</body>
</html>
